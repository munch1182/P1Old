# Permission

### 流程

1. 对需要申请的权限进行判断，已经拥有的权限不再申请，如果没有需要申请的权限则直接回调结果
2. 申请前显示解释权限的dialog(可选)
3. 执行权限申请
4. 如果权限被拒绝，则显示解释权限的dialog(可选)，如果选择确定，则再次申请    
   如果权限被永久拒绝，则显示跳转设置的dialog(可选)，如果选择确定，则跳转设置
5. 分类结果并回调

### onShouldShowRequestPermissionRationale

- 当未申请过权限时，此方法返回false
- 当第一次拒绝时，此方法返回true
- 当被永久拒绝时，此方法返回false
- 所以无法在申请权限前就判断是否被永久拒绝

### 特殊权限

#### Manifest.permission.ACCESS_BACKGROUND_LOCATION

- 后台定位权限；此权限需要先申请定位权限；在Android10中，需要和定位权限一起申请，单独申请会直接被系统拒绝；在Android11中，只能获得定位权限之后，才能再进行此权限的申请，一起申请会抛出异常

### 
            